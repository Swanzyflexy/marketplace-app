{% extends 'base.html.twig' %}

{% block title %}Post New Ad
{% endblock %}

{% block body %}
	<div class="breadcrumbs">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-6 col-md-6 col-12">
					<div class="breadcrumbs-content">
						<h1 class="page-title">Post Ad</h1>
					</div>
				</div>
				<div class="col-lg-6 col-md-6 col-12">
					<ul class="breadcrumb-nav">
						<li>
							<a href="index.html">Home</a>
						</li>
						<li>Post Ad</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<!-- End Breadcrumbs -->
	{% if _validation_errors is not empty %}
		{% for error in _validation_errors %}
			<div class="alert alert-danger">
				{{ error }}
			</div>
		{% endfor %}
	{% endif %}
	{% for flashMessage in app.session.flashbag.get('success') %}
		<div class="alert alert-success">
			{{ flashMessage }}
		</div>
	{% endfor %}

	{% for flashMessage in app.session.flashbag.get('error') %}
		<div class="alert alert-danger">
			{{ flashMessage }}
		</div>
	{% endfor %}
	<!-- Start Dashboard Section -->
	<section class="dashboard section">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-4 col-12">
					{{ include('profile/partials/sidebar.html.twig') }}
				</div>
				<div class="col-lg-9 col-md-8 col-12">
					<div
						class="main-content">
						<!-- Start Post Ad Block Area -->
						<div class="dashboard-block mt-0">
							<h3 class="block-title">Post New Ad</h3>
							<div
								class="inner-block">
								<!-- Start Post Ad Tab -->
								<div class="post-ad-tab">
									<nav>
										<div class="nav nav-tabs" id="nav-tab" role="tablist">
											<button class="nav-link tab-link active" id="nav-item-info-tab" data-bs-toggle="tab" data-bs-target="#nav-item-info" type="button" role="tab" aria-controls="nav-item-info" aria-selected="true">
												<span class="serial">01</span>
												Step
												<span class="sub-title">Ad Information</span>
											</button>
											<button class="nav-link tab-link" id="nav-item-details-tab" data-bs-toggle="tab" data-bs-target="#nav-item-details" type="button" role="tab" aria-controls="nav-item-details" aria-selected="false">
												<span class="serial">02</span>
												Step
												<span class="sub-title">Ad Details</span>
											</button>
											<button class="nav-link tab-link" id="nav-user-info-tab" data-bs-toggle="tab" data-bs-target="#nav-user-info" type="button" role="tab" aria-controls="nav-user-info" aria-selected="false">
												<span class="serial">03</span>
												Step
												<span class="sub-title">User Information</span>
											</button>
										</div>
									</nav>
									<form class="default-form-style" id="wizardForm" method="post" enctype="multipart/form-data">
										<div class="tab-content" id="nav-tabContent">
											<div
												class="tab-pane fade show active" id="nav-item-info" role="tabpanel" aria-labelledby="nav-item-info-tab">
												<!-- Start Post Ad Step One Content -->
												<div class="step-one-content">
													<div class="row">
														<div class="col-12">
															<div class="form-group">
																<label>Add Title*</label>
																<input name="title" type="text" placeholder="Enter Title">
																{% if _validation_errors.title is defined %}
																	<div class="error">{{ _validation_errors.title }}</div>
																{% endif %}
															</div>
														</div>
														<div class="col-12">
															<div class="form-group">
																<label for="category">Category:</label>
																<select id="category" name="category" required>
																	<option value="" class="h6 fw-bold" selected>Select Category</option>
																	{% for mainCategory in categories %}
																		<option value="{{ mainCategory.id }}" class="h6 fw-bold text-dark" disabled>
																			<span class="fw-bold">
																				{{ mainCategory.name }}
																			</span>
																		</option>
																		{% for subCategory in mainCategory.subcategories %}
																			<option value="{{ subCategory.id }}" class="text-black-50">
																				&nbsp;&nbsp;&nbsp;
																				{{ subCategory.name }}</option>
																		{% endfor %}
																	{% endfor %}
																</select>
																{% if _validation_errors.category is defined %}
																	<div class="error">{{ _validation_errors.category }}</div>
																{% endif %}
															</div>
														</div>
													</div>
													<!-- Start Post Ad Step One Content -->
												</div>
											</div>
											<div
												class="tab-pane fade" id="nav-item-details" role="tabpanel" aria-labelledby="nav-item-details-tab">
												<!-- Start Post Ad Step Two Content -->
												<div class="step-two-content">
													<div class="row">
														<div class="col-lg-4 col-12">
															<div class="form-group">
																<label>Item Price*</label>
																<input name="price" type="text" placeholder="Enter Price">
																{% if _validation_errors.price is defined %}
																	<div class="error">{{ _validation_errors.price }}</div>
																{% endif %}
															</div>
														</div>
														<div class="col-lg-4 col-12">
															<div class="form-group">
																<label>Price Type*</label>
																<div class="selector-head">
																	<span class="arrow">
																		<i class="lni lni-chevron-down"></i>
																	</span>
																	<select class="user-chosen-select" name="price_type">
																		<option value="none">Select an option
																		</option>
																		<option value="none">Fixed</option>
																		<option value="none">Price On Call</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-4 col-12">
															<div class="form-group">
																<label>Select Currency*</label>
																<div class="selector-head">
																	<span class="arrow">
																		<i class="lni lni-chevron-down"></i>
																	</span>
																	<select class="user-chosen-select">
																		<option value="none">Select an option
																		</option>
																		<option value="none">$ - United States Dollar</option>
																		<option value="none">€ - Euro</option>
																		<option value="none">£ - GPB</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-6 col-12">
															<div class="upload-input">
																<input type="file" id="upload" name="ad_images">
																<label for="upload" onclick="addAdImage();" class="text-center content">
																	<span class="text">
																		<span class="d-block mb-15">Drop files anywhere to Upload</span>
																		<span class=" mb-15 plus-icon">
																			<i class="lni lni-plus"></i>
																		</span>
																		<span class="main-btn d-block btn-hover">Select File</span>
																		<span class="d-block">Maximum upload file size 10Mb</span>
																	</span>
																</label>
																<div
																	class="ad-image" style="display: none;"><!-- Your ad image template content goes here -->
																</div>
																{% if _validation_errors.ad_images is defined %}
																	<div class="error">{{ _validation_errors.ad_images }}</div>
																{% endif %}
															</div>
														</div>
														<div class="col-lg-6 col-12">
															<div class="form-group">
																<label class="video-label">Video Link*
																	<span>Input only YouTube & Vimeo</span>
																</label>
																<input name="video" type="text" placeholder="Input link">
																<a href="javascript:void(0)" class="add-video">
																	<i class="lni lni-plus"></i>
																	Add Video</a>
															</div>
														</div>
														<div class="col-lg-6 col-12">
															<div class="form-group mt-30">
																<label>Ad Description*</label>
																<textarea name="description" placeholder="Input ad description" style="height: 140px;"></textarea>
																{% if adErrors.description is defined %}
																	<div class="error">{{ adErrors.description.message }}</div>
																{% endif %}
															</div>
														</div>
														<div class="col-lg-6 col-12">
															<div class="form-group mt-30">
																<label>Item Condition*</label>
																<div class="selector-head mb-2">
																	<span class="arrow">
																		<i class="lni lni-chevron-down"></i>
																	</span>
																	<select class="user-chosen-select">
																		<option value="none">Select an option
																		</option>
																		<option value="none">Used</option>
																		<option value="none">Brand New</option>
																	</select>
																</div>
																<label class="tag-label">Tags*<span>Comma(,)separated</span>
																</label>
																<input name="tag" type="text" placeholder="Type Product tag">
															</div>
														</div>
													</div>
												</div>
												<!-- Start Post Ad Step Two Content -->
											</div>
											<div
												class="tab-pane fade" id="nav-user-info" role="tabpanel" aria-labelledby="nav-user-info-tab">
												<!-- Start Post Ad Step Three Content -->
												<div class="step-three-content">
													<div class="row">
														<div class="col-lg-6 col-12">
															<div class="form-group">
																<label>Name*</label>
																<input name="fullname" type="text" placeholder="Enter your name" value={{app.user.fullname}} disabled>
															</div>
														</div>
														<div class="col-lg-6 col-12">
															<div class="form-group">
																<label>Mobile Number*</label>
																<input name="phone" type="text" placeholder="Enter mobile number" value={{app.user.phone}} disabled>
															</div>
														</div>
														<div class="col-12">
															<div class="form-group">
																<label>Country*</label>
																<div class="selector-head">
																	<span class="arrow">
																		<i class="lni lni-chevron-down"></i>
																	</span>
																	<select class="user-chosen-select" name="country" id="country">
																		<option value="">Select a Country</option>
																		{% for country in countries %}
																			<option value="{{ country.code }}">{{ country.name }}</option>
																		{% endfor %}
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-6 col-12">
															<div class="form-group">
																<label>Select City*</label>
																<div class="selector-head">
																	<span class="arrow">
																		<i class="lni lni-chevron-down"></i>
																	</span>
																	<select class="user-chosen-select" name="city">
																		<option value="none">Select City</option>
																		<option value="none">New York</option>
																		<option value="none">Los Angeles</option>
																		<option value="none">Chicago</option>
																		<option value="none">San Diego</option>
																		<option value="none">San Jose</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-lg-6 col-12">
															<div class="form-group">
																<label>Select State*</label>
																<div class="selector-head">
																	<span class="arrow">
																		<i class="lni lni-chevron-down"></i>
																	</span>
																	<select class="user-chosen-select" name="state">
																		<option value="none">Select State</option>
																		<option value="none">New York</option>
																		<option value="none">Texas</option>
																		<option value="none">Arizona</option>
																		<option value="none">Florida</option>
																		<option value="none">Washington</option>
																	</select>
																</div>
															</div>
														</div>
														<div class="col-12">
															<div class="google-map">
																<div class="mapouter">
																	<div class="gmap_canvas">
																		<iframe width="100%" height="300" id="gmap_canvas" src="https://maps.google.com/maps?q=2880%20Broadway,%20New%20York&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
																		<a href="https://123movies-to.org"></a><br>
																		<style>
																			.mapouter {
																				position: relative;
																				text-align: right;
																				height: 300px;
																				width: 100%;
																			}
																		</style>
																		<a href="https://www.embedgooglemap.net">embed google maps wordpress</a>
																		<style>
																			.gmap_canvas {
																				overflow: hidden;
																				background: none !important;
																				height: 300px;
																				width: 100%;
																			}
																		</style>
																	</div>
																</div>
															</div>
														</div>
														<div class="col-12">
															<div class="form-check">
																<input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
																<label class="form-check-label" for="flexCheckDefault">
																	I agree to all Terms of Use & Posting Rules
																</label>
															</div>
														</div>
													</div>
												</div>
												<!-- Start Post Ad Step Three Content -->
											</div>
											<div class="mt-3">
												<div class="form-group button mb-0 d-flex justify-content-between">
													<button type="button" class="btn alt-btn" id="prevBtn" onclick="changeTab(-1)">Previous</button>
													<button type="button" class="btn btn-primary" id="nextBtn" onclick="changeTab(1)">Next</button>
													<button type="submit" class="btn btn-success" id="submitBtn">Submit</button>
												</div>
											</div>
										</div>
									</form>
								</div>
							</div>
							<!-- End Post Ad Tab -->
						</div>
					</div>
					<!-- End Post Ad Block Area -->
				</div>
			</div>
		</div>
		{# </div> #}
	</section><!-- End Dashboard Section --><!-- Start Newsletter Area --><div class="newsletter section">
		<div class="container">
			<div class="inner-content">
				<div class="row align-items-center">
					<div class="col-lg-6 col-md-6 col-12">
						<div class="title">
							<i class="lni lni-alarm"></i>
							<h2>Newsletter</h2>
							<p>We don't send spam so don't worry.</p>
						</div>
					</div>
					<div class="col-lg-6 col-md-6 col-12">
						<div class="form">
							<form action="#" method="get" target="_blank" class="newsletter-form">
								<input name="EMAIL" placeholder="Your email address" type="email">
								<div class="button">
									<button class="btn">Subscribe<span class="dir-part"></span>
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Newsletter Area -->
	 <script>
									function addAdImage() {
								const adImagesContainer = document.getElementById('upload');
								const adImageTemplate = document.querySelector('.ad-image');
								const clone = adImageTemplate.cloneNode(true);
								clone.classList.remove('d-none');  // Ensure the cloned element is visible
								adImagesContainer.appendChild(clone);
								}
								
								 const form = document.getElementById('wizardForm');
								  const tabs = document.querySelectorAll('.tab-pane');
								  const tabLinks = document.querySelectorAll('.tab-link');
								  const prevBtn = document.getElementById('prevBtn');
								  const nextBtn = document.getElementById('nextBtn');
								  const submitBtn = document.getElementById('submitBtn');
								  let currentTab = 0;
								
								  function showTab(index) {
								    tabs.forEach((tab, i) => {
								      tab.classList.remove('show', 'active');
								      if (i === index) {
								        tab.classList.add('show', 'active');
								      }
								    });
									tabLinks.forEach((link, i) => {
									  link.classList.remove('active');
									  if (i === index) {
										link.classList.add('active');
									  }
									});
								    updateButtons();
								  }
								
								  function updateButtons() {
								    currentTab === 0 ? prevBtn.classList.add('d-none') : prevBtn.classList.remove('d-none');
									currentTab === tabs.length - 1 ? nextBtn.classList.add('d-none') : nextBtn.classList.remove('d-none');
								    currentTab === tabs.length - 1 ? submitBtn.classList.remove('d-none') : submitBtn.classList.add('d-none');
								  }
								
								  function changeTab(n) {
								    currentTab += n;
								    showTab(currentTab);
								  }
								
								  form.addEventListener('submit', function (e) {
								    e.preventDefault();
									form.action = '/ad/new';
									form.submit();
								    // Add your form submission logic here
								    alert('Form submitted successfully!');
								  });
								
								  showTab(currentTab);
								</script>
{% endblock %}
